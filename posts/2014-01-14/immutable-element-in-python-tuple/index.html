<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-39627402-1"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-39627402-1', {
              page_path: window.location.pathname,
            });
          </script><title>Immutable element in Python tuple</title><meta httpEquiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.5,minimum-scale=1" /><link rel="canonical" href="https://jokester.github.io/posts/2014-01-14/immutable-element-in-python-tuple" /><meta name="next-head-count" content="7" /><link rel="preload" href="/_next/static/css/8639f3a0ecabf020af1d.css" as="style" /><link rel="stylesheet" href="/_next/static/css/8639f3a0ecabf020af1d.css" data-n-g /><noscript data-n-css></noscript><link rel="preload" href="/_next/static/chunks/main-a33862f2a9b4c9428792.js" as="script" /><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script" /><link rel="preload" href="/_next/static/chunks/framework.a83de14fa7c198c0ebc0.js" as="script" /><link rel="preload" href="/_next/static/chunks/commons.e5ca022afa04201794ff.js" as="script" /><link rel="preload" href="/_next/static/chunks/pages/_app-92770ed1197439226d81.js" as="script" /><link rel="preload" href="/_next/static/chunks/5ecd45089e87842e5583e63e8181954d33ba1a4b.9d3f2628db1316f380b8.js" as="script" /><link rel="preload" href="/_next/static/chunks/b52a6c8fe9dfc388856b15614b0f9ba4172af7a6.4359e23ad183d495ce45.js" as="script" /><link rel="preload" href="/_next/static/chunks/pages/posts/%5B...slug%5D-ae8177c6f60b6e8949e6.js" as="script" /></head><body class="overflow-y-scroll"><div id="__next"><div class="bg-black text-yellow-100"><div class="min-h-screen container mx-auto"><div class="px-4 py-1 flex items-center bg-gray-900 space-x-4 text-sm"><a class="sm:hidden text-lg" href="/">挖坑自動機</a><a class="hidden sm:inline-block text-lg" href="/">挖坑自動機 / Digging automaton</a><span>|</span><a class="text-yellow-200" href="/posts/">/posts</a><a class class href="/works/">/works</a><a class class href="/about/">/about</a></div><div class="px-4 pt-6"><div class="markdown"><h1></h1><hr /><div class="markdown"><h4>What</h4><p>I found a surprising fact today in <a href="http://stackoverflow.com/q/21105207/327815">this SO post</a>:
<code>tuple</code> in Python turns out to be able to contain mutable objects (I was expecting that they cannot).</p><p>Such tuples are not hashable, because being hashable requires being recursively hashable and immutable.
Therefore they <em>cannot</em> be used as key of <code>dict</code>.</p><pre style="color: #c5c8c6; text-shadow: 0 1px rgba(0, 0, 0, 0.3); font-family: Inconsolata, Monaco, Consolas, 'Courier New', Courier, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; -moz-tab-size: 4; -o-tab-size: 4; tab-size: 4; -webkit-hyphens: none; -moz-hyphens: none; ms-hyphens: none; hyphens: none; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0.3em; background: #1d1f21;"><code style="color: #c5c8c6; text-shadow: 0 1px rgba(0, 0, 0, 0.3); font-family: Inconsolata, Monaco, Consolas, 'Courier New', Courier, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; -moz-tab-size: 4; -o-tab-size: 4; tab-size: 4; -webkit-hyphens: none; -moz-hyphens: none; ms-hyphens: none; hyphens: none;" class="language-python"><span>In </span><span style="color: #c5c8c6;" class="token">[</span><span style="color: #FF73FD;" class="token">34</span><span style="color: #c5c8c6;" class="token">]</span><span style="color: #c5c8c6;" class="token">:</span><span> a_tuple</span><span style="color: #EDEDED;" class="token">=</span><span style="color: #c5c8c6;" class="token">(</span><span style="color: #c5c8c6;" class="token">{</span><span style="color: #c5c8c6;" class="token">}</span><span style="color: #c5c8c6;" class="token">,</span><span style="color: #c5c8c6;" class="token">)</span><span>              </span><span style="color: #7C7C7C;" class="token"># No problem</span><span>
</span>
<span>In </span><span style="color: #c5c8c6;" class="token">[</span><span style="color: #FF73FD;" class="token">35</span><span style="color: #c5c8c6;" class="token">]</span><span style="color: #c5c8c6;" class="token">:</span><span> a_tuple
</span><span>Out</span><span style="color: #c5c8c6;" class="token">[</span><span style="color: #FF73FD;" class="token">35</span><span style="color: #c5c8c6;" class="token">]</span><span style="color: #c5c8c6;" class="token">:</span><span> </span><span style="color: #c5c8c6;" class="token">(</span><span style="color: #c5c8c6;" class="token">{</span><span style="color: #c5c8c6;" class="token">}</span><span style="color: #c5c8c6;" class="token">,</span><span style="color: #c5c8c6;" class="token">)</span><span>
</span>
<span>In </span><span style="color: #c5c8c6;" class="token">[</span><span style="color: #FF73FD;" class="token">36</span><span style="color: #c5c8c6;" class="token">]</span><span style="color: #c5c8c6;" class="token">:</span><span> a_dict</span><span style="color: #EDEDED;" class="token">=</span><span style="color: #c5c8c6;" class="token">{</span><span> a_tuple</span><span style="color: #c5c8c6;" class="token">:</span><span> </span><span style="color: #99CC99;" class="token">True</span><span> </span><span style="color: #c5c8c6;" class="token">}</span><span>   </span><span style="color: #7C7C7C;" class="token"># TypeError: unhashable type: 'dict'</span></code></pre><h4>Why</h4><p>The same question was inquired in <a href="http://stackoverflow.com/questions/9755990/">this post</a>.</p><p>TL;DR of <a href>the direct answer</a>:
such tuples maintains to be immutable because what it contains is <em>reference</em>,
and reference to a particular object is not mutable.</p><p>So, immutability here means the tuple's shallow self won't be changing.</p><p>Long answer from <a href="http://docs.python.org/3.3/reference/datamodel.html#the-standard-type-hierarchy">python doc</a>:</p><blockquote><p>Immutable sequences (Strings, Tuples, Bytes)</p><pre style="color: #c5c8c6; text-shadow: 0 1px rgba(0, 0, 0, 0.3); font-family: Inconsolata, Monaco, Consolas, 'Courier New', Courier, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; -moz-tab-size: 4; -o-tab-size: 4; tab-size: 4; -webkit-hyphens: none; -moz-hyphens: none; ms-hyphens: none; hyphens: none; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0.3em; background: #1d1f21;"><code style="color: #c5c8c6; text-shadow: 0 1px rgba(0, 0, 0, 0.3); font-family: Inconsolata, Monaco, Consolas, 'Courier New', Courier, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; -moz-tab-size: 4; -o-tab-size: 4; tab-size: 4; -webkit-hyphens: none; -moz-hyphens: none; ms-hyphens: none; hyphens: none;"><span>An object of an immutable sequence type cannot change once it is created. (If the object contains references to other objects, these other objects may be mutable and may be changed; however, the collection of objects directly referenced by an immutable object cannot change.)</span></code></pre><p>Mutable sequences (Strings, Tuples, Bytes)</p><pre style="color: #c5c8c6; text-shadow: 0 1px rgba(0, 0, 0, 0.3); font-family: Inconsolata, Monaco, Consolas, 'Courier New', Courier, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; -moz-tab-size: 4; -o-tab-size: 4; tab-size: 4; -webkit-hyphens: none; -moz-hyphens: none; ms-hyphens: none; hyphens: none; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0.3em; background: #1d1f21;"><code style="color: #c5c8c6; text-shadow: 0 1px rgba(0, 0, 0, 0.3); font-family: Inconsolata, Monaco, Consolas, 'Courier New', Courier, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; -moz-tab-size: 4; -o-tab-size: 4; tab-size: 4; -webkit-hyphens: none; -moz-hyphens: none; ms-hyphens: none; hyphens: none;"><span>Mutable sequences can be changed after they are created. The subscription and slicing notations can be used as the target of assignment and del (delete) statements.</span></code></pre></blockquote><h4>More</h4><p><a href="http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx">Immutability in C# Part One: Kinds of Immutability</a> introduces more kinds of <code>mutability</code>.</p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"mdMeta":{"realpath":"/home/runner/work/jokester.github.io/jokester.github.io/posts/2014/2014-01-14-immutable-element-in-python-tuple.markdown","slug":["2014-01-14","immutable-element-in-python-tuple"],"frontMatter":{"title":"Immutable element in Python tuple","publishAt":"2014-01-14"}},"mdContent":"\n#### What\n\nI found a surprising fact today in [this SO post](http://stackoverflow.com/q/21105207/327815):\n`tuple` in Python turns out to be able to contain mutable objects (I was expecting that they cannot).\n\nSuch tuples are not hashable, because being hashable requires being recursively hashable and immutable.\nTherefore they *cannot* be used as key of `dict`.\n\n~~~ python\nIn [34]: a_tuple=({},)              # No problem\n\nIn [35]: a_tuple\nOut[35]: ({},)\n\nIn [36]: a_dict={ a_tuple: True }   # TypeError: unhashable type: 'dict'\n~~~\n\n#### Why\nThe same question was inquired in [this post](http://stackoverflow.com/questions/9755990/).\n\nTL;DR of [the direct answer]():\nsuch tuples maintains to be immutable because what it contains is *reference*,\nand reference to a particular object is not mutable.\n\nSo, immutability here means the tuple's shallow self won't be changing.\n\nLong answer from [python doc](http://docs.python.org/3.3/reference/datamodel.html#the-standard-type-hierarchy):\n\n\u003e   Immutable sequences (Strings, Tuples, Bytes)\n\u003e\n\u003e     An object of an immutable sequence type cannot change once it is created. (If the object contains references to other objects, these other objects may be mutable and may be changed; however, the collection of objects directly referenced by an immutable object cannot change.)\n\u003e\n\u003e   Mutable sequences (Strings, Tuples, Bytes)\n\u003e\n\u003e     Mutable sequences can be changed after they are created. The subscription and slicing notations can be used as the target of assignment and del (delete) statements.\n\n#### More\n[Immutability in C# Part One: Kinds of Immutability](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx) introduces more kinds of `mutability`.\n"},"__N_SSG":true},"page":"/posts/[...slug]","query":{"slug":["2014-01-14","immutable-element-in-python-tuple"]},"buildId":"pEiYUdzGm5H1HF0Jo_3ww","nextExport":false,"isFallback":false,"gsp":true}</script><script noModule src="/_next/static/chunks/polyfills-ee8b6a435fbaa7581564.js"></script><script src="/_next/static/chunks/main-a33862f2a9b4c9428792.js" async></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async></script><script src="/_next/static/chunks/framework.a83de14fa7c198c0ebc0.js" async></script><script src="/_next/static/chunks/commons.e5ca022afa04201794ff.js" async></script><script src="/_next/static/chunks/pages/_app-92770ed1197439226d81.js" async></script><script src="/_next/static/chunks/5ecd45089e87842e5583e63e8181954d33ba1a4b.9d3f2628db1316f380b8.js" async></script><script src="/_next/static/chunks/b52a6c8fe9dfc388856b15614b0f9ba4172af7a6.4359e23ad183d495ce45.js" async></script><script src="/_next/static/chunks/pages/posts/%5B...slug%5D-ae8177c6f60b6e8949e6.js" async></script><script src="/_next/static/pEiYUdzGm5H1HF0Jo_3ww/_buildManifest.js" async></script><script src="/_next/static/pEiYUdzGm5H1HF0Jo_3ww/_ssgManifest.js" async></script></body></html>